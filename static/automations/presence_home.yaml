- alias: "Arrive home"
  mode: single
  trigger:
    - platform: state
      entity_id: group.presence_home
      from: not_home
      to: home
  condition:
    - condition: state
      entity_id: input_boolean.presence_automations
      state: "on"
  action:
    - scene: scene.everything_on
    - service: notify.dan
      data:
        message: Arrived home
    - service: climate.set_hvac_mode
      target:
        entity_id: group.thermostats
      data:
        hvac_mode: "heat"

- alias: "Leave home"
  mode: single
  trigger:
    - platform: state
      entity_id: group.presence_home
      from: home
      to: not_home
  condition:
    - condition: state
      entity_id: input_boolean.presence_automations
      state: "on"
  action:
    - scene: scene.everything_off
    - service: climate.set_hvac_mode
      target:
        entity_id: group.thermostats
      data:
        hvac_mode: "off"
    - service: notify.dan
      data:
        message: Away mode
