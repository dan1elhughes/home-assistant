- alias: Morning fade-in
  mode: single
  trigger:
    - platform: time
      at: 08:30
  condition:
    - condition: state
      entity_id: group.presence_home
      state: home
    - condition: state
      entity_id: input_boolean.lighting_automations
      state: "on"
  action:
    # 08:30
    - service: light.turn_on
      target:
        entity_id: group.bedroom_lights
      data:
        brightness: 255
        color_temp: 500

        # 20 minutes.
        # Appears to start the transition then immediately continue the
        # automation steps, rather than starting, transitioning, then
        # continuing.
        transition: 1200

    # 08:30 - 10:00
    - delay: "01:29:30"

    # 10:00
    # Just before, so that the lights are still gradually turning off if the
    # daytime trigger below fires and cancels the switchoff.
    - service: light.turn_off
      target:
        entity_id: group.bedroom_lights
      data:
        transition: 600

- alias: Morning radio (BBC R4)
  mode: single
  trigger:
    - platform: time
      at: 08:30
  condition:
    - condition: state
      entity_id: group.presence_home
      state: home
  action:
    - choose:
        - conditions:
            - condition: time
              weekday:
                - sun
          sequence:
            - service: spotcast.start
              data:
                device_name: Bedroom
                start_volume: 15
                uri: spotify:playlist:37i9dQZF1DWUb0uBnlJuTi
                random_song: true
                shuffle: true

      default:
        - service: media_player.volume_set
          target:
            entity_id: media_player.bedroom
          data:
            volume_level: 0.15

        - service: media_player.play_media
          target:
            entity_id: media_player.bedroom
          data:
            media_content_id: media-source://radio_browser/292895dc-3d1f-4c40-b85a-e877405510f9
            media_content_type: audio/mpeg

- alias: Morning daytime
  mode: single
  trigger:
    - platform: time
      at: "10:00"
  condition:
    - condition: state
      entity_id: group.presence_home
      state: home
    - condition: state
      entity_id: input_boolean.lighting_automations
      state: "on"
  action:
    - service: media_player.turn_off
      target:
        entity_id: media_player.bedroom
    - scene: scene.day_mode
